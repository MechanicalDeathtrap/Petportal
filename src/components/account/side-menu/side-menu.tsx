import style from "./side-menu.module.sass";
import { useEffect, useState } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom";
import { deleteAuthCookie } from "../../../utils/cookies.ts";
import { authStore } from "../../../stores/auth-store.ts";

export const SideMenu = () => {
  const [path, setPath] = useState("None");
  const location = useLocation();
  const navigate = useNavigate();

  const exitFromProfile = () => {
    deleteAuthCookie();
    authStore.setAuthorized(false);
    navigate("/");
  };

  useEffect(() => {
    const currentPath = () => {
      switch (location.pathname) {
        case "/account":
          setPath("account");
          break;
        case "/account/my-projects":
          setPath("my-projects");
          break;
        case "/account/project-responses":
          setPath("project-responses");
          break;
        case "/account/my-reviews":
          setPath("my-reviews");
          break;
        case "/account/favourites":
          setPath("favourites");
          break;
        case "/account/settings":
          setPath("settings");
          break;
      }
    };
    currentPath();
  }, [path, location]);

  return (
    <aside className={style["side-menu"]}>
      <ul className={style["side-menu__list"]}>
        <li
          className={`${style["side-menu__menu-item"]} 
                        ${path === "account" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account">
            <button>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="25"
                height="28"
                viewBox="0 0 25 28"
                fill="currentColor"
              >
                <path d="M17.1064 6.5465C17.1064 10.1618 14.1483 13.0925 10.4993 13.0925C6.85039 13.0925 3.89233 10.1618 3.89233 6.5465C3.89233 2.93123 6.85039 0.000488281 10.4993 0.000488281C14.1483 0.000488281 17.1064 2.93123 17.1064 6.5465ZM6.00108 6.5465C6.00108 9.00788 8.01502 11.0032 10.4993 11.0032C12.9836 11.0032 14.9976 9.00788 14.9976 6.5465C14.9976 4.08512 12.9836 2.08978 10.4993 2.08978C8.01502 2.08978 6.00108 4.08512 6.00108 6.5465Z" />
                <path d="M0 17.546C0 16.4869 0.866546 15.6284 1.93548 15.6284H19.0645C20.1335 15.6284 21 16.4869 21 17.546V17.6227H0V17.546Z" />
                <path d="M0 17.623H2.14839V20.0968H0.774194C0.346618 20.0968 0 19.7533 0 19.3297V17.623Z" />
                <path d="M18.8516 17.623H20.9999V19.3297C20.9999 19.7533 20.6533 20.0968 20.2258 20.0968H18.8516V17.623Z" />
                <path d="M20.999 19.1816C20.999 20.2079 20.7275 21.2241 20.1998 22.1722C19.6722 23.1202 18.8987 23.9817 17.9237 24.7074C16.9488 25.4331 15.7913 26.0086 14.5175 26.4014C13.2436 26.7941 11.8784 26.9963 10.4995 26.9963C9.1207 26.9963 7.75539 26.7941 6.48152 26.4014C5.20766 26.0086 4.0502 25.4331 3.07523 24.7074C2.10026 23.9817 1.32688 23.1202 0.799227 22.1722C0.271577 21.2241 -1.2054e-07 20.2079 0 19.1816H2.1524C2.1524 19.9975 2.36831 20.8054 2.78778 21.5591C3.20727 22.3128 3.82212 22.9977 4.59721 23.5746C5.37231 24.1515 6.29249 24.6092 7.30521 24.9213C8.31793 25.2335 9.40335 25.3942 10.4995 25.3942C11.5957 25.3942 12.6811 25.2335 13.6938 24.9213C14.7066 24.6092 15.6267 24.1515 16.4018 23.5746C17.1769 22.9977 17.7917 22.3128 18.2113 21.5591C18.6307 20.8054 18.8466 19.9975 18.8466 19.1816H20.999Z" />
                <path d="M3.00481 17.0571C2.81736 17.0571 2.63175 17.0938 2.45856 17.1648C2.28538 17.2359 2.12802 17.3401 1.99548 17.4713C1.86292 17.6027 1.75778 17.7586 1.68605 17.9301C1.61431 18.1017 1.57739 18.2856 1.57739 18.4714H2.14836C2.14836 18.36 2.17051 18.2496 2.21356 18.1466C2.25659 18.0437 2.31968 17.9502 2.39921 17.8713C2.47874 17.7925 2.57315 17.73 2.67707 17.6874C2.78097 17.6448 2.89234 17.6228 3.00481 17.6228V17.0571Z" />
                <path d="M17.9951 17.0381C18.1826 17.0381 18.3682 17.0747 18.5414 17.1458C18.7145 17.2168 18.8719 17.321 19.0045 17.4523C19.137 17.5836 19.2421 17.7395 19.3139 17.9111C19.3856 18.0827 19.4225 18.2666 19.4225 18.4523H18.8516C18.8516 18.3409 18.8294 18.2306 18.7863 18.1276C18.7434 18.0247 18.6803 17.9311 18.6007 17.8523C18.5212 17.7735 18.4267 17.711 18.3229 17.6684C18.219 17.6257 18.1076 17.6038 17.9951 17.6038V17.0381Z" />
              </svg>

              <span>Личный кабинет</span>
            </button>
          </Link>
        </li>
        <li
          className={`${style["side-menu__menu-item"]} 
                        ${path === "my-projects" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account/my-projects">
            <button>
              <svg
                width="23"
                height="17"
                viewBox="0 0 23 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1 2V15C1 15.5523 1.44772 16 2 16H18.3027C18.7217 16 19.0962 15.7388 19.2411 15.3457L22.0042 7.84571C22.2447 7.19285 21.7616 6.5 21.0659 6.5H21C20.4477 6.5 20 6.05228 20 5.5V4C20 3.44772 19.5523 3 19 3H10.8508C10.6237 3 10.4034 2.92272 10.2261 2.78087L8.27391 1.21913C8.0966 1.07728 7.87629 1 7.64922 1H2C1.44772 1 1 1.44772 1 2Z"
                  stroke="currentColor"
                  strokeWidth="1.6"
                />
                <path
                  d="M21.1219 6.5H5.11803C4.73926 6.5 4.393 6.714 4.22361 7.05279L1 13.5"
                  stroke="currentColor"
                  strokeWidth="1.6"
                />
              </svg>
              <span>Мои проекты</span>
            </button>
          </Link>
        </li>
        <li
          className={`${style["side-menu__menu-item"]} 
            ${path === "project-responses" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account/project-responses">
            <button>
              <svg
                width="22"
                height="23"
                viewBox="0 0 22 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.911 6.04076C10.9243 6.01463 10.9372 6.00485 10.9465 5.99943C10.9588 5.99223 10.9773 5.98621 11.0001 5.98621C11.0228 5.98621 11.0413 5.99223 11.0536 5.99943C11.0629 6.00485 11.0758 6.01463 11.0891 6.04076L12.3665 8.54378C12.6413 9.0823 13.156 9.45788 13.7527 9.55529L16.776 10.0489C16.8069 10.0539 16.82 10.0637 16.8274 10.0706C16.8378 10.0803 16.8494 10.0968 16.856 10.1198C16.8626 10.1428 16.8617 10.1629 16.8581 10.1766C16.8554 10.1864 16.8496 10.2017 16.8262 10.2224L14.7187 12.0882C14.2078 12.5405 13.9786 13.232 14.1183 13.8998L14.6958 16.6604C14.702 16.6905 14.6977 16.7063 14.6939 16.7159C14.6887 16.7291 14.6776 16.7457 14.6589 16.7601C14.6402 16.7745 14.6214 16.781 14.6072 16.7827C14.597 16.7839 14.5806 16.7841 14.5532 16.7704L11.8497 15.4187C11.3149 15.1512 10.6853 15.1512 10.1504 15.4187L7.44689 16.7704C7.4194 16.7841 7.40307 16.7839 7.3928 16.7827C7.37869 16.781 7.35983 16.7745 7.34112 16.7601C7.32241 16.7457 7.31131 16.7291 7.30611 16.7159C7.30231 16.7063 7.29799 16.6905 7.30429 16.6604L7.89002 13.8604C8.02122 13.2332 7.82744 12.5821 7.37463 12.1287L5.4131 10.1646C5.39237 10.1439 5.38705 10.1286 5.38476 10.1181C5.38172 10.1042 5.38171 10.0847 5.38875 10.0631C5.39578 10.0414 5.40722 10.0257 5.41787 10.0162C5.42589 10.0091 5.43918 9.99982 5.46814 9.99521L8.24085 9.55423C8.84065 9.45884 9.3587 9.08245 9.63478 8.54148L10.911 6.04076Z"
                  stroke="currentColor"
                  strokeWidth="1.8"
                />
                <path
                  d="M19 22H3C1.89543 22 1 21.1046 1 20V3C1 1.89543 1.89543 1 3 1H19C20.1046 1 21 1.89543 21 3V20C21 21.1046 20.1046 22 19 22Z"
                  stroke="currentColor"
                  strokeWidth="1.8"
                />
              </svg>
              <span>Отклики на проекты</span>
            </button>
          </Link>
        </li>
        <li
          className={`${style["side-menu__menu-item"]} 
                        ${path === "my-reviews" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account/my-reviews">
            <button>
              <svg
                width="22"
                height="23"
                viewBox="0 0 22 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10.911 6.04076C10.9243 6.01463 10.9372 6.00485 10.9465 5.99943C10.9588 5.99223 10.9773 5.98621 11.0001 5.98621C11.0228 5.98621 11.0413 5.99223 11.0536 5.99943C11.0629 6.00485 11.0758 6.01463 11.0891 6.04076L12.3665 8.54378C12.6413 9.0823 13.156 9.45788 13.7527 9.55529L16.776 10.0489C16.8069 10.0539 16.82 10.0637 16.8274 10.0706C16.8378 10.0803 16.8494 10.0968 16.856 10.1198C16.8626 10.1428 16.8617 10.1629 16.8581 10.1766C16.8554 10.1864 16.8496 10.2017 16.8262 10.2224L14.7187 12.0882C14.2078 12.5405 13.9786 13.232 14.1183 13.8998L14.6958 16.6604C14.702 16.6905 14.6977 16.7063 14.6939 16.7159C14.6887 16.7291 14.6776 16.7457 14.6589 16.7601C14.6402 16.7745 14.6214 16.781 14.6072 16.7827C14.597 16.7839 14.5806 16.7841 14.5532 16.7704L11.8497 15.4187C11.3149 15.1512 10.6853 15.1512 10.1504 15.4187L7.44689 16.7704C7.4194 16.7841 7.40307 16.7839 7.3928 16.7827C7.37869 16.781 7.35983 16.7745 7.34112 16.7601C7.32241 16.7457 7.31131 16.7291 7.30611 16.7159C7.30231 16.7063 7.29799 16.6905 7.30429 16.6604L7.89002 13.8604C8.02122 13.2332 7.82744 12.5821 7.37463 12.1287L5.4131 10.1646C5.39237 10.1439 5.38705 10.1286 5.38476 10.1181C5.38172 10.1042 5.38171 10.0847 5.38875 10.0631C5.39578 10.0414 5.40722 10.0257 5.41787 10.0162C5.42589 10.0091 5.43918 9.99982 5.46814 9.99521L8.24085 9.55423C8.84065 9.45884 9.3587 9.08245 9.63478 8.54148L10.911 6.04076Z"
                  stroke="currentColor"
                  strokeWidth="1.8"
                />
                <path
                  d="M19 22H3C1.89543 22 1 21.1046 1 20V3C1 1.89543 1.89543 1 3 1H19C20.1046 1 21 1.89543 21 3V20C21 21.1046 20.1046 22 19 22Z"
                  stroke="currentColor"
                  strokeWidth="1.8"
                />
              </svg>
              <span>Отзывы</span>
            </button>
          </Link>
        </li>
        <li
          className={`${style["side-menu__menu-item"]} 
                        ${path === "favourites" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account/favourites">
            <button>
              <svg
                width="21"
                height="24"
                viewBox="0 0 21 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17 1H4C2.89543 1 2 1.89543 2 3V20.9893C2 21.9131 2.97218 22.5139 3.79845 22.1008C3.93173 22.0341 4.05194 21.9441 4.15334 21.8349L9.08776 16.5209C9.85912 15.6902 11.166 15.666 11.9676 16.4676L17.4358 21.9358C17.4785 21.9785 17.5253 22.0169 17.5755 22.0503C18.1844 22.4563 19 22.0198 19 21.288V3C19 1.89543 18.1046 1 17 1Z"
                  stroke="currentColor"
                  strokeWidth="1.8"
                />
              </svg>
              <span>Избранное</span>
            </button>
          </Link>
        </li>
        <li
          className={`${style["side-menu__menu-item"]} 
                        ${path === "settings" ? style["side-menu__menu-item--chosen"] : ""}`}
        >
          <Link to="/account/settings">
            <button>
              <svg
                width="23"
                height="23"
                viewBox="0 0 23 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.502 0.416687C10.6312 0.416687 9.79162 0.526811 8.99011 0.713279C8.82297 0.75229 8.67208 0.842252 8.55828 0.970733C8.44448 1.09921 8.3734 1.25987 8.35486 1.43049L8.17906 3.03317C8.12157 3.55835 7.8182 4.02303 7.36047 4.28748C6.90365 4.55141 6.34918 4.58065 5.86564 4.36837H5.86457L4.39239 3.72018C4.23536 3.65108 4.06076 3.63244 3.89268 3.66682C3.7246 3.70121 3.57135 3.78694 3.45408 3.91216C2.30965 5.13225 1.43132 6.60965 0.93251 8.25858C0.882824 8.4227 0.885293 8.59819 0.939576 8.76085C0.993859 8.9235 1.09728 9.06531 1.23557 9.16669L2.54166 10.1244C2.96815 10.438 3.21897 10.9321 3.21897 11.4607C3.21897 11.9895 2.96816 12.4841 2.54166 12.797L1.23557 13.7536C1.09728 13.855 0.993859 13.9968 0.939576 14.1595C0.885293 14.3221 0.882824 14.4976 0.93251 14.6617C1.43126 16.3105 2.3089 17.789 3.45408 19.0092C3.57148 19.1343 3.72479 19.2198 3.89286 19.254C4.06093 19.2882 4.23547 19.2694 4.39239 19.2001L5.86457 18.5519C6.34834 18.3392 6.90334 18.3698 7.36047 18.6339C7.8182 18.8984 8.12157 19.363 8.17906 19.8882L8.35486 21.4909C8.37354 21.6612 8.44456 21.8215 8.55813 21.9498C8.67171 22.078 8.82225 22.1679 8.98903 22.207C9.79091 22.3942 10.6312 22.5047 11.502 22.5047C12.3727 22.5047 13.2123 22.3946 14.0138 22.2081C14.181 22.1691 14.3319 22.0791 14.4457 21.9507C14.5595 21.8222 14.6305 21.6615 14.6491 21.4909L14.8249 19.8882C14.8824 19.363 15.1858 18.8984 15.6435 18.6339C16.1003 18.37 16.6548 18.3397 17.1383 18.5519L18.6116 19.2001C18.7685 19.2694 18.943 19.2882 19.1111 19.254C19.2792 19.2198 19.4325 19.1343 19.5499 19.0092C20.6943 17.7891 21.5726 16.3107 22.0714 14.6617C22.1211 14.4976 22.1187 14.3221 22.0644 14.1595C22.0101 13.9968 21.9067 13.855 21.7684 13.7536L20.4623 12.797C20.0358 12.4841 19.785 11.9895 19.785 11.4607C19.785 10.9318 20.0358 10.4373 20.4623 10.1244L21.7684 9.16777C21.9067 9.06639 22.0101 8.92458 22.0644 8.76193C22.1187 8.59927 22.1211 8.42378 22.0714 8.25966C21.5726 6.61073 20.6943 5.13225 19.5499 3.91216C19.4325 3.78712 19.2792 3.7016 19.1111 3.66741C18.943 3.63321 18.7685 3.65203 18.6116 3.72126L17.1383 4.36945C16.6548 4.58173 16.1003 4.55141 15.6435 4.28748C15.1858 4.02303 14.8824 3.55835 14.8249 3.03317L14.6491 1.43049C14.6304 1.2602 14.5594 1.09989 14.4458 0.97164C14.3322 0.843387 14.1817 0.7535 14.0149 0.714358C13.213 0.527213 12.3727 0.416687 11.502 0.416687ZM11.502 2.07329C12.04 2.07329 12.5566 2.16986 13.0744 2.26095L13.178 3.21328C13.2928 4.26187 13.9023 5.19451 14.8152 5.72191C15.7286 6.24965 16.8407 6.31033 17.8059 5.88584L18.6817 5.50081C19.3541 6.30834 19.8866 7.22045 20.2584 8.21975L19.4819 8.78921C18.6317 9.41288 18.1284 10.4058 18.1284 11.4607C18.1284 12.5156 18.6317 13.5085 19.4819 14.1322L20.2584 14.7016C19.8866 15.7009 19.3541 16.6131 18.6817 17.4206L17.8059 17.0355C16.8407 16.6111 15.7286 16.6717 14.8152 17.1995C13.9023 17.7269 13.2928 18.6595 13.178 19.7081L13.0744 20.6604C12.5567 20.7513 12.0397 20.8481 11.502 20.8481C10.964 20.8481 10.4473 20.7515 9.9295 20.6604L9.82596 19.7081C9.71117 18.6595 9.10161 17.7269 8.18877 17.1995C7.27534 16.6717 6.16325 16.6111 5.19804 17.0355L4.32229 17.4206C3.64967 16.6132 3.11733 15.701 2.7455 14.7016L3.52203 14.1322C4.37221 13.5085 4.87557 12.5156 4.87557 11.4607C4.87557 10.4058 4.3718 9.41223 3.52203 8.78813L2.7455 8.21868C3.11754 7.21899 3.65048 6.30747 4.32337 5.49974L5.19804 5.88477C6.16325 6.30925 7.27534 6.24965 8.18877 5.72191C9.10161 5.19451 9.71117 4.26187 9.82596 3.21328L9.9295 2.26095C10.4473 2.17011 10.9642 2.07329 11.502 2.07329ZM11.502 7.04309C9.07201 7.04309 7.08437 9.03073 7.08437 11.4607C7.08437 13.8907 9.07201 15.8783 11.502 15.8783C13.9319 15.8783 15.9196 13.8907 15.9196 11.4607C15.9196 9.03073 13.9319 7.04309 11.502 7.04309ZM11.502 8.69969C13.0366 8.69969 14.263 9.92603 14.263 11.4607C14.263 12.9954 13.0366 14.2217 11.502 14.2217C9.9673 14.2217 8.74097 12.9954 8.74097 11.4607C8.74097 9.92603 9.9673 8.69969 11.502 8.69969Z"
                  fill="currentColor"
                />
              </svg>
              <span>Настройки</span>
            </button>
          </Link>
        </li>
        <li className={style["side-menu__menu-item"]}>
          <button onClick={exitFromProfile}>
            <svg
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19.204 3.48018C19.5045 3.12478 19.4616 2.59039 19.086 2.31556C17.4742 1.13618 15.5895 0.375021 13.6013 0.107321C11.3341 -0.197951 9.02687 0.151205 6.95151 1.11364C4.87615 2.07608 3.11913 3.6117 1.88752 5.53953C0.655899 7.46736 0.00100275 9.70708 1.15014e-06 11.9947C-0.00100045 14.2824 0.651934 16.5227 1.88186 18.4516C3.11179 20.3805 4.86746 21.9177 6.94198 22.8819C9.0165 23.8462 11.3234 24.1974 13.5909 23.8941C15.5793 23.6281 17.4647 22.8686 19.0775 21.6906C19.4534 21.4161 19.4967 20.8818 19.1965 20.5261C18.8963 20.1705 18.3665 20.1287 17.9875 20.3988C16.6226 21.3719 15.0373 22.0002 13.3674 22.2235C11.4185 22.4842 9.43554 22.1823 7.6524 21.3535C5.86925 20.5247 4.36017 19.2034 3.30299 17.5455C2.24581 15.8875 1.68458 13.9618 1.68545 11.9955C1.68631 10.0291 2.24922 8.10399 3.30785 6.44693C4.36648 4.78987 5.87672 3.46993 7.66059 2.64267C9.44446 1.81541 11.4276 1.5153 13.3764 1.77769C15.046 2.0025 16.6308 2.63218 17.9948 3.60642C18.3736 3.87693 18.9035 3.83558 19.204 3.48018Z"
                fill="currentColor"
              />
              <path
                d="M19.5 7.5L23.109 11.109C23.2799 11.2799 23.3653 11.3653 23.4216 11.451C23.6405 11.7843 23.6405 12.2157 23.4216 12.549C23.3653 12.6347 23.2799 12.7201 23.109 12.891L19.5 16.5"
                stroke="currentColor"
                strokeWidth="1.6"
              />
              <path d="M10 12H23.5" stroke="black" strokeWidth="1.6" />
            </svg>
            <span>Выйти</span>
          </button>
        </li>
      </ul>
    </aside>
  );
};
